rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya5bCP56iL5bqP77+laG9tZV9ydWxl77+leyJ0aXRsZSI6IkFHReWKqOa8qyIsImF1dGhvciI6IuWwj+WnkOWnkCIsInVybCI6Imhpa2VyOi8vZnlzb3J0IyNmeWNsYXNzIyNmeXBhZ2UiLCJ2ZXJzaW9uIjowLCJjb2xfdHlwZSI6Im1vdmllXzMiLCJjbGFzc19uYW1lIjoi5pyA6L+R5pu05pawJuavj+WRqOaUvumAgSbnm67lvZUiLCJjbGFzc191cmwiOiJ1cGRhdGUmd2VlayZtZW51IiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJzb3J0X25hbWUiOiItPibmm7TmlrDop4TliJkm6YWN572u6KeE5YiZIiwieWVhcl9uYW1lIjoiIiwic29ydF91cmwiOiImcHB1cXEmcHBzcXEiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxyXG5jb25zdCBfY29uZmlnID0ge1xyXG4gIGhvbWVfbmFtZTogXCJBR0XliqjmvKtcIixcclxuICByZW1vdGVfdXBkYXRlOiAnaHR0cHM6Ly9naXRlZS5jb20vZjExc3QvaGlrZXIvcmF3L21hc3Rlci9hZ2VmYW5zL3VwZGF0ZS5qc29uJyxcclxuICBsb2NhbF9qczogJ2hpa2VyOi8vZmlsZXMvcXVpZXRib3kvYWdlZmFucy9tYWluLmpzJyxcclxuICBsb2NhbF9jb25maWdfcGF0aDogJ2hpa2VyOi8vZmlsZXMvcXVpZXRib3kvYWdlZmFucy9jb25maWcuanNvbicsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHF1ZXJ5VXBkYXRlKCkge1xyXG4gIGlmIChnZXRVcmwoKS5pbmRleE9mKCdwcHVxcScpID49IDApIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHF1ZXJ5U2V0dGluZygpIHtcclxuICBpZiAoZ2V0VXJsKCkuaW5kZXhPZigncHBzcXEnKSA+PSAwKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldExvY2FsQ29uZmlnKCkge1xyXG4gIGxldCBsb2NhbENvbmZpZyA9IGZldGNoKF9jb25maWcubG9jYWxfY29uZmlnX3BhdGgsIHt9KTtcclxuICBsZXQgbG9jYWxDb25maWdPYmogPSB7fTtcclxuICB0cnkge1xyXG4gICAgaWYgKGxvY2FsQ29uZmlnID09ICcnKSB7XHJcbiAgICAgIHRocm93ICdub25lJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBsb2NhbENvbmZpZ09iaiA9IEpTT04ucGFyc2UobG9jYWxDb25maWcpO1xyXG4gICAgICBpZiAobG9jYWxDb25maWdPYmoucnVsZV92ZXJzaW9uID09IHVuZGVmaW5lZCB8fCBsb2NhbENvbmZpZ09iai5qc192ZXJzaW9uID09IHVuZGVmaW5lZCB8fCBsb2NhbENvbmZpZ09iai5zZXR0aW5nID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93ICd1bmRlZmluZWQnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgbG9jYWxDb25maWdPYmogPSB7fTtcclxuICAgIGxvY2FsQ29uZmlnT2JqLnJ1bGVfdmVyc2lvbiA9IDA7XHJcbiAgICBsb2NhbENvbmZpZ09iai5qc192ZXJzaW9uID0gMDtcclxuICAgIGxvY2FsQ29uZmlnT2JqLnNldHRpbmcgPSBbXTtcclxuICAgIHdyaXRlRmlsZShfY29uZmlnLmxvY2FsX2NvbmZpZ19wYXRoLCBKU09OLnN0cmluZ2lmeShsb2NhbENvbmZpZ09iaikpO1xyXG4gIH1cclxuICByZXR1cm4gbG9jYWxDb25maWdPYmo7XHJcbn1cclxuZnVuY3Rpb24gcXVlcnlVcGRhdGVUaW1lT3V0KCkge1xyXG4gIGxldCBjb25maWcgPSBnZXRMb2NhbENvbmZpZygpO1xyXG4gIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICBpZiAoKG5vdyAtIGNvbmZpZy5sYXN0X2NoZWNrX3VwZGF0ZV90aW1lKSA+IDI1OTIwMDAwMCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBnZXRMb2NhbFJ1bGVWZXJzaW9uKCkge1xyXG4gIGxldCB2ZXJzaW9uID0gZ2V0TG9jYWxDb25maWcoKS5ydWxlX3ZlcnNpb247XHJcbiAgcmV0dXJuIHZlcnNpb247XHJcbn1cclxuZnVuY3Rpb24gZ2V0TG9jYWxKc1ZlcnNpb24oKSB7XHJcbiAgbGV0IHZlcnNpb24gPSBnZXRMb2NhbENvbmZpZygpLmpzX3ZlcnNpb247XHJcbiAgcmV0dXJuIHZlcnNpb247XHJcbn1cclxuZnVuY3Rpb24gZ2V0TG9jYWxTZXR0aW5nKCkge1xyXG4gIGxldCBzZXR0aW5nID0gZ2V0TG9jYWxDb25maWcoKS5zZXR0aW5nO1xyXG4gIHJldHVybiBzZXR0aW5nO1xyXG59XHJcbmZ1bmN0aW9uIGdldExvY2FsSlMoKSB7XHJcbiAgbGV0IGpzQ29kZSA9IGZldGNoKF9jb25maWcubG9jYWxfanMsIHt9KTtcclxuICByZXR1cm4ganNDb2RlO1xyXG59XHJcbmZ1bmN0aW9uIGdldFJlbW90ZUNvbW1hbmRSb3V0ZShyZW1vdGVfY29tbWFuZCkge1xyXG4gIHJldHVybiBmZXRjaChyZW1vdGVfY29tbWFuZCwge30pO1xyXG59XHJcbmZ1bmN0aW9uIGRpc3BsYXlVcGRhdGUoKSB7XHJcbiAgbGV0IHJlcyA9IHt9O1xyXG4gIGxldCByZW1vdGVKc29uID0gSlNPTi5wYXJzZShmZXRjaChfY29uZmlnLnJlbW90ZV91cGRhdGUsIHt9KSk7XHJcbiAgbGV0IHJlbW90ZVJ1bGVWZXJzaW9uID0gcmVtb3RlSnNvbi5ydWxlX3ZlcnNpb247XHJcbiAgbGV0IHJlbW90ZUpzVmVyc2lvbiA9IHJlbW90ZUpzb24uanNfdmVyc2lvbjtcclxuICBsZXQgcmVtb3RlQ01EID0gcmVtb3RlSnNvbi5jb21tYW5kO1xyXG4gIGxldCByZW1vdGVKUyA9IHJlbW90ZUpzb24ucmVtb3RlO1xyXG4gIGxldCByZW1vdGVTZXR0aW5nID0gSlNPTi5zdHJpbmdpZnkocmVtb3RlSnNvbi5zZXR0aW5nKTtcclxuICBsZXQgbG9jYWxDb25maWcgPSBnZXRMb2NhbENvbmZpZygpO1xyXG4gIGxvY2FsQ29uZmlnLmxhc3RfY2hlY2tfdXBkYXRlX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICB3cml0ZUZpbGUoX2NvbmZpZy5sb2NhbF9jb25maWdfcGF0aCwgSlNPTi5zdHJpbmdpZnkobG9jYWxDb25maWcpKTtcclxuICBkID0gW3tcclxuICAgIHRpdGxlOiAn6KeE5YiZ54mI5pysOiAnICsgZ2V0TG9jYWxSdWxlVmVyc2lvbigpICsgJyAgICDmnIDmlrA6ICcgKyByZW1vdGVSdWxlVmVyc2lvbixcclxuICAgIGRlc2M6ICfngrnlh7vmm7TmlrDop4TliJnvvIzoi6Xml6DmlYjor7fogZTns7vkvZzogIXkv67lpI0nLFxyXG4gICAgdXJsOiBgaGlrZXI6Ly9lbXB0eUBsYXp5UnVsZT0uanM6YCArXHJcbiAgICAgIGBsZXQgbG9jYWxDb25maWcgPSBKU09OLnBhcnNlKGZldGNoKCdgICsgX2NvbmZpZy5sb2NhbF9jb25maWdfcGF0aCArIGAnLHt9KSk7bG9jYWxDb25maWcucnVsZV92ZXJzaW9uPSdgICsgcmVtb3RlUnVsZVZlcnNpb24gKyBgJzt3cml0ZUZpbGUoJ2AgKyBfY29uZmlnLmxvY2FsX2NvbmZpZ19wYXRoICsgYCcsSlNPTi5zdHJpbmdpZnkobG9jYWxDb25maWcpKTtgICtcclxuICAgICAgYCdgICsgZ2V0UmVtb3RlQ29tbWFuZFJvdXRlKHJlbW90ZUNNRCkgKyBgJ2AsXHJcbiAgICBjb2xfdHlwZTogJ3RleHRfMSdcclxuICB9LCB7XHJcbiAgICBjb2xfdHlwZTogJ2xpbmVfYmxhbmsnXHJcbiAgfSwge1xyXG4gICAgdGl0bGU6ICfohJrmnKzniYjmnKw6ICcgKyBnZXRMb2NhbEpzVmVyc2lvbigpICsgJyAgICDmnIDmlrA6ICcgKyByZW1vdGVKc1ZlcnNpb24sXHJcbiAgICBkZXNjOiAn54K55Ye75pu05paw6ISa5pys77yM6Iul5peg5pWI6K+36IGU57O75L2c6ICF5L+u5aSNJyxcclxuICAgIHVybDogYGhpa2VyOi8vZW1wdHlAbGF6eVJ1bGU9LmpzOmAgK1xyXG4gICAgICBgd3JpdGVGaWxlKCdgICsgX2NvbmZpZy5sb2NhbF9qcyArIGAnLCBmZXRjaCgnYCArIHJlbW90ZUpTICsgYCcsIHt9KSk7YCArXHJcbiAgICAgIGBsZXQgbG9jYWxDb25maWcgPSBKU09OLnBhcnNlKGZldGNoKCdgICsgX2NvbmZpZy5sb2NhbF9jb25maWdfcGF0aCArIGAnLHt9KSk7YCArXHJcbiAgICAgIGBsb2NhbENvbmZpZy5qc192ZXJzaW9uPSdgICsgcmVtb3RlSnNWZXJzaW9uICsgYCc7YCArXHJcbiAgICAgIGBsb2NhbENvbmZpZy5zZXR0aW5nPUpTT04ucGFyc2UoXFxgYCArIHJlbW90ZVNldHRpbmcgKyBgXFxgKTtgICtcclxuICAgICAgYHdyaXRlRmlsZSgnYCArIF9jb25maWcubG9jYWxfY29uZmlnX3BhdGggKyBgJyxKU09OLnN0cmluZ2lmeShsb2NhbENvbmZpZykpO2AgK1xyXG4gICAgICBgcmVmcmVzaFBhZ2UoKTsndG9hc3Q6Ly/mm7TmlrDmiJDlip/vvIEnYCxcclxuICAgIGNvbF90eXBlOiAndGV4dF8xJ1xyXG4gIH0sIHtcclxuICAgIGNvbF90eXBlOiAnbGluZV9ibGFuaydcclxuICB9LCB7XHJcbiAgICB0aXRsZTogJzxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyO1wiPjxzdHJvbmc+PGZvbnQgY29sb3I9XCJyZWRcIj7Ct+abtOaWsOaXpeW/l8K3PC9mb250Pjwvc3Ryb25nPjx1bD48bGk+JyArIHJlbW90ZUpzb24ubm90ZS5qb2luKCc8L2xpPjxsaT4nKSArICc8L2xpPjwvdWw+PC9wPicsXHJcbiAgICBjb2xfdHlwZTogJ3JpY2hfdGV4dCdcclxuICB9XTtcclxuICByZXMuZGF0YSA9IGQ7XHJcbiAgc2V0UmVzdWx0KHJlcyk7XHJcbn1cclxuZnVuY3Rpb24gZGlzcGxheVNldHRpbmcoKSB7XHJcbiAgZnVuY3Rpb24gZmluZE9wdFRpdGxlKG9wdHMsIHZhbHVlKSB7XHJcbiAgICBsZXQgdGl0bGUgPSAnJztcclxuICAgIG9wdHMuc29tZSgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PSB2YWx1ZSkge1xyXG4gICAgICAgIHRpdGxlID0gaXRlbS50aXRsZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRpdGxlO1xyXG4gIH1cclxuICBsZXQgcmVzID0ge307XHJcbiAgbGV0IGQgPSBbXTtcclxuICBsZXQgc2V0dGluZyA9IGdldExvY2FsU2V0dGluZygpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0dGluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgZC5wdXNoKHtcclxuICAgICAgdGl0bGU6IHNldHRpbmdbaV0udGl0bGUgKyAnOiDigJjigJgnICsgZmluZE9wdFRpdGxlKHNldHRpbmdbaV0ub3B0cywgc2V0dGluZ1tpXS52YWx1ZSkgKyAn4oCZ4oCZJyxcclxuICAgICAgY29sX3R5cGU6ICd0ZXh0XzEnXHJcbiAgICB9KTtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2V0dGluZ1tpXS5vcHRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGQucHVzaCh7XHJcbiAgICAgICAgdGl0bGU6IHNldHRpbmdbaV0ub3B0c1tqXS50aXRsZSxcclxuICAgICAgICBjb2xfdHlwZTogJ3RleHRfMycsXHJcbiAgICAgICAgdXJsOiBgaGlrZXI6Ly9lbXB0eUBsYXp5UnVsZT0uanM6YCArXHJcbiAgICAgICAgICBgbGV0IGxvY2FsQ29uZmlnID0gSlNPTi5wYXJzZShmZXRjaCgnYCArIF9jb25maWcubG9jYWxfY29uZmlnX3BhdGggKyBgJyx7fSkpO2AgK1xyXG4gICAgICAgICAgYGxvY2FsQ29uZmlnLnNldHRpbmdbYCArIGkgKyBgXS52YWx1ZT1gICsgc2V0dGluZ1tpXS5vcHRzW2pdLnZhbHVlICsgYDtgICtcclxuICAgICAgICAgIGB3cml0ZUZpbGUoJ2AgKyBfY29uZmlnLmxvY2FsX2NvbmZpZ19wYXRoICsgYCcsSlNPTi5zdHJpbmdpZnkobG9jYWxDb25maWcpKTtgICtcclxuICAgICAgICAgIGByZWZyZXNoUGFnZSgpOyd0b2FzdDovL+S/ruaUueaIkOWKn++8gSdgXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXMuZGF0YSA9IGQ7XHJcbiAgc2V0UmVzdWx0KHJlcyk7XHJcbn1cclxudHJ5IHtcclxuICBpZiAocXVlcnlVcGRhdGUoKSB8fCBxdWVyeVVwZGF0ZVRpbWVPdXQoKSkge1xyXG4gICAgZGlzcGxheVVwZGF0ZSgpO1xyXG4gIH1cclxuICBlbHNlIGlmIChxdWVyeVNldHRpbmcoKSkge1xyXG4gICAgZGlzcGxheVNldHRpbmcoKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICB2YXIgbG9jYWxKUyA9IGdldExvY2FsSlMoKTtcclxuICAgIGlmIChsb2NhbEpTID09ICcnKSB7XHJcbiAgICAgIHRocm93ICdub25lJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBldmFsKGxvY2FsSlMpO1xyXG4gICAgICBqaWV4aSgpO1xyXG4gICAgfVxyXG4gIH1cclxufSBjYXRjaCAoZSkge1xyXG4gIGRpc3BsYXlVcGRhdGUoKTtcclxufSIsInNlYXJjaF91cmwiOiJodHRwczovL3d3dy5hZ2VmYW5zLmNjL3NlYXJjaD9xdWVyeT0qKiZwYWdlPWZ5cGFnZSIsInRpdGxlQ29sb3IiOiIjZmYxNDhlOGUiLCJncm91cCI6IiPig6PvuI/lsI/lp5Dlp5AiLCJzZWFyY2hGaW5kIjoiLmJsb2NrY29udGVudDEmJi5jZWxsOy5jZWxsX2ltZm9ybSYmLmNlbGxfaW1mb3JtX25hbWUmJlRleHQ7YSYmaHJlZjsubmV3bmFtZSYmVGV4dDsuY2VsbF9pbWZvcm1fa3ZfZGVzYyYmVGV4dDtpbWcmJnNyYyIsImRldGFpbF9jb2xfdHlwZSI6InRleHRfMyIsImRldGFpbF9maW5kX3J1bGUiOiJqczpcbmV2YWwoZmV0Y2goJ2hpa2VyOi8vZmlsZXMvcXVpZXRib3kvYWdlZmFucy9tYWluLmpzJykse30pO1xuZXJqaSgpOyIsInNkZXRhaWxfY29sX3R5cGUiOiJ0ZXh0XzMiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IioiLCJ1YSI6ImF1dG8iLCJwcmVSdWxlIjoiIn0=